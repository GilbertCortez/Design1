(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["2d21afc5"],{be9e:function(e,t,l){"use strict";l.r(t);var r=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("q-btn",{attrs:{label:"Add Gallery",icon:"add",color:"green"},nativeOn:{click:function(t){e.modal_gallery=!0}}}),l("br"),l("br"),e._l(e.gallery,function(t){return l("q-list",{key:t[".key"],attrs:{highlight:""}},[l("q-item",{nativeOn:{click:function(l){e.clickRow(JSON.stringify(t))}}},[l("q-item-main",{attrs:{label:t.event_name}}),l("q-item-side",{attrs:{right:"",icon:"remove_red_eye"}})],1),l("q-item-separator")],1)}),l("q-modal",{attrs:{maximized:""},model:{value:e.modal_gallery,callback:function(t){e.modal_gallery=t},expression:"modal_gallery"}},[l("q-modal-layout",[l("q-toolbar",{attrs:{slot:"header",color:"black"},slot:"header"},[l("q-btn",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],attrs:{flat:"",round:"",dense:"",icon:"keyboard_arrow_left"}}),l("q-toolbar-title",[e._v("\n                  "+e._s(e.currentGallery.event_name)+" Gallery\n               ")])],1),l("div",{staticClass:"q-pa-md"},[l("q-uploader",{attrs:{filter:e.filterFiles,multiple:"","upload-factory":e.uploadFile,"hide-upload-button":"","hide-upload-progress":"",url:"url"},on:{add:e.uploadFile}}),l("div",{staticClass:"flex"},e._l(e.currentPhotos,function(t){return l("div",{staticClass:"col-2 q-pa-sm wrap"},[l("img",{staticStyle:{border:"solid grey 2px","object-fit":"cover",width:"155px",height:"155px"},attrs:{src:t.url},on:{click:function(l){e.clickPic(t)}}})])}))],1)],1)],1)],2)},o=[];r._withStripped=!0;var a={data:function(){return{opened:!1,modal_gallery:!1,currentGallery:{event_name:""},currentPhotos:[],photo:[],gallery:[]}},methods:{clickRow:function(e){console.log(e),this.currentGallery={event_name:JSON.parse(e).event_name,".key":JSON.parse(e)[".key"]},this.$binding("currentPhotos",this.$db.firestore().collection("gallery").doc(JSON.parse(e)[".key"]).collection("photos")),this.modal_gallery=!0},clickPic:function(e){this.opened=!0,this.currentPic=e.url},uploadFile:function(e){var t=this;this.photo.push(e);var l=this.$db.storage(),r=this.photo[0][0],o=l.ref("gallery/"+new Date);o.put(r).then(function(e){e.ref.getDownloadURL().then(function(e){t.$db.firestore().collection("gallery").doc(t.currentGallery[".key"]).collection("photos").add({url:e})})})},filterFiles:function(e){var t=3145728;return e.filter(function(e){return e.size<=t})}},mounted:function(){this.$parent.select="Gallery",this.$binding("gallery",this.$db.firestore().collection("gallery"))}},i=a,n=l("2877"),c=Object(n["a"])(i,r,o,!1,null,null,null);c.options.__file="gallery.vue";t["default"]=c.exports}}]);